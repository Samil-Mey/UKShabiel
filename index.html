<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ujian Personaliti Tepat Pelajar</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }
        .tab-button.active {
            background-color: #3B82F6; /* bg-blue-600 */
            color: white;
            border-color: #3B82F6;
        }
        .tab-button {
            border-bottom: 2px solid transparent;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* Styling for Likert scale */
        .likert-options {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
        }
        .likert-options label {
            flex: 1;
            text-align: center;
            padding: 10px 5px;
            border: 1px solid #e5e7eb;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            font-size: 0.75rem; /* smaller text for mobile */
        }
        .likert-options label:first-child { border-radius: 0.5rem 0 0 0.5rem; }
        .likert-options label:last-child { border-radius: 0 0.5rem 0.5rem 0; }
        .likert-options input:checked + span {
            background-color: #3B82F6;
            color: white;
            font-weight: 600;
        }
        @media (min-width: 640px) {
            .likert-options label {
                font-size: 0.875rem;
            }
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto p-4 sm:p-6 md:p-8 max-w-4xl">
        
        <header id="header" class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-blue-700">Ujian Personaliti Tepat</h1>
            <p class="mt-2 text-md sm:text-lg text-blue-600">Jawab semua penyataan secara jujur untuk keputusan yang jitu.</p>
        </header>

        <!-- Name Registration Container -->
        <div id="registration-container" class="bg-white p-6 sm:p-8 rounded-2xl shadow-lg text-center fade-in">
            <h2 class="text-2xl font-bold mb-4">Selamat Datang!</h2>
            <p class="mb-6 text-gray-600">Sila masukkan nama anda untuk memulakan ujian.</p>
            <input type="text" id="name-input" placeholder="Taip nama anda di sini..." class="w-full max-w-sm px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
            <p id="name-error" class="text-red-500 mt-2 hidden">Sila masukkan nama anda.</p>
            <button id="start-btn" class="mt-6 w-full max-w-sm bg-blue-600 text-white font-bold py-3 px-8 rounded-full hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-300 transition-all duration-300 transform hover:scale-105">
                Mula Ujian
            </button>
        </div>

        <!-- Quiz Container -->
        <div id="quiz-container" class="hidden">
             <!-- Progress Bar -->
            <div class="mb-6">
                <div class="flex justify-between mb-1">
                    <span class="text-base font-medium text-blue-700">Kemajuan</span>
                    <span id="progress-text" class="text-sm font-medium text-blue-700">0 / 45</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2.5">
                    <div id="progress-bar" class="bg-blue-600 h-2.5 rounded-full" style="width: 0%"></div>
                </div>
            </div>
            <div id="questions-wrapper" class="bg-white p-6 sm:p-8 rounded-2xl shadow-lg space-y-8">
                <!-- Questions will be injected here -->
            </div>
        </div>

        <!-- Submit Button Container -->
        <div id="button-container" class="hidden text-center mt-8">
            <button id="submit-btn" class="bg-blue-600 text-white font-bold py-3 px-8 rounded-full hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-300 transition-all duration-300 transform hover:scale-105">
                Lihat Keputusan Saya
            </button>
            <p id="error-msg" class="text-red-500 mt-4 hidden">Sila jawab semua soalan ya!</p>
        </div>

        <!-- Result Container -->
        <div id="result-container" class="hidden bg-white rounded-2xl shadow-lg mt-8 overflow-hidden">
             <div class="p-6 sm:p-8 bg-blue-600 text-white text-center">
                <h2 id="result-for-name" class="text-xl sm:text-2xl font-bold"></h2>
                <h3 id="result-title" class="text-3xl sm:text-4xl font-extrabold mt-1"></h3>
                <p id="result-abbreviation" class="text-lg font-mono tracking-widest mt-2 opacity-75"></p>
            </div>
            <div class="p-6 sm:p-8">
                <!-- Honesty Feedback Section -->
                <div id="honesty-feedback" class="mb-8 p-4 rounded-lg flex items-start space-x-4">
                    <!-- Icon, title, and text will be injected here -->
                </div>
                <p id="result-description" class="text-md sm:text-lg text-center mb-8"></p>
                
                <!-- Abbreviation Explanation Section -->
                <div id="abbreviation-explanation" class="mb-8 p-4 rounded-lg bg-gray-100">
                    <!-- Explanation will be injected here -->
                </div>

                <div id="tabs-container" class="flex flex-wrap justify-center border-b border-gray-200 mb-6">
                    <button data-tab="minat" class="tab-button active text-sm sm:text-base font-semibold py-3 px-4 sm:px-6 focus:outline-none">Hala Tuju Anda</button>
                    <button data-tab="belajar" class="tab-button text-sm sm:text-base font-semibold py-3 px-4 sm:px-6 focus:outline-none">Cara Belajar</button>
                    <button data-tab="berjaya" class="tab-button text-sm sm:text-base font-semibold py-3 px-4 sm:px-6 focus:outline-none">Tips Kejayaan</button>
                </div>
                <div id="minat" class="tab-content space-y-4"></div>
                <div id="belajar" class="tab-content hidden space-y-3"></div>
                <div id="berjaya" class="tab-content hidden space-y-3"></div>
            </div>
            <div class="p-6 bg-gray-50 text-center">
                <button id="retry-btn" class="bg-gray-600 text-white font-bold py-3 px-8 rounded-full hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-300 transition-all duration-300 transform hover:scale-105">
                    Cuba Ujian Semula
                </button>
            </div>
        </div>
        
        <footer class="text-center text-gray-500 text-sm mt-12 pb-4">
            <p>Dicipta untuk membantu pelajar mengenali potensi diri.</p>
        </footer>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- Elements ---
        const registrationContainer = document.getElementById('registration-container');
        const nameInput = document.getElementById('name-input');
        const nameError = document.getElementById('name-error');
        const startBtn = document.getElementById('start-btn');
        const quizContainer = document.getElementById('quiz-container');
        const questionsWrapper = document.getElementById('questions-wrapper');
        const buttonContainer = document.getElementById('button-container');
        const submitBtn = document.getElementById('submit-btn');
        const errorMsg = document.getElementById('error-msg');
        const resultContainer = document.getElementById('result-container');
        const resultForName = document.getElementById('result-for-name');
        const resultTitle = document.getElementById('result-title');
        const resultAbbreviation = document.getElementById('result-abbreviation');
        const resultDescription = document.getElementById('result-description');
        const abbreviationExplanation = document.getElementById('abbreviation-explanation');
        const honestyFeedback = document.getElementById('honesty-feedback');
        const retryBtn = document.getElementById('retry-btn');
        const header = document.getElementById('header');
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');
        const tabsContainer = document.getElementById('tabs-container');
        let studentName = "";
        let shuffledQuestions = [];

        // --- Data Kuiz (45 Soalan) - Bahasa Dipermudahkan & Positif ---
        const allQuestions = [
            // Extroversion (E) vs Introversion (I)
            { statement: "Dalam kelas, saya suka bila semua orang dengar idea saya.", type: 'E' },
            { statement: "Saya lebih suka borak dengan seorang kawan baik daripada berborak dalam kumpulan besar.", type: 'I' },
            { statement: "Saya rasa seronok dan bertenaga bila berada di majlis yang ramai orang.", type: 'E' },
            { statement: "Saya akan fikir betul-betul dulu sebelum saya cakap.", type: 'I' },
            { statement: "Saya selesa untuk menegur dan memulakan borak dengan orang baru.", type: 'E' },
            { statement: "Selepas seharian di sekolah, saya perlu masa bersendirian untuk rehatkan minda.", type: 'I' },
            { statement: "Saya lebih suka suasana yang meriah dan aktif.", type: 'E' },
            { statement: "Saya lebih selesa hantar mesej (cth: WhatsApp) daripada bercakap di telefon.", type: 'I' },
            { statement: "Saya kenal ramai orang dan suka berkawan dengan sesiapa sahaja.", type: 'E' },
            { statement: "Kalau ada banyak aktiviti dalam satu hari, saya akan rasa sangat penat.", type: 'I' },
            // Sensing (S) vs Intuition (N)
            { statement: "Saya lebih suka ikut resipi langkah demi langkah bila memasak.", type: 'S' },
            { statement: "Saya suka berangan-angan tentang masa depan dan apa yang mungkin berlaku.", type: 'N' },
            { statement: "Bila belajar Sejarah, saya lebih ingat pada tarikh dan fakta.", type: 'S' },
            { statement: "Saya lebih suka fikir 'kenapa' sesuatu itu berlaku, bukan sekadar hafal fakta.", type: 'N' },
            { statement: "Saya lebih suka permainan video yang realistik berbanding fantasi.", type: 'S' },
            { statement: "Saya cepat bosan dengan kerja yang berulang-ulang.", type: 'N' },
            { statement: "Bila kawan cerita masalah, saya fokus pada apa yang betul-betul berlaku.", type: 'S' },
            { statement: "Saya suka cari maksud tersirat dalam lirik lagu atau puisi.", type: 'N' },
            { statement: "Saya belajar lebih baik bila cikgu tunjuk contoh yang sebenar.", type: 'S' },
            { statement: "Saya suka bincang tentang idea-idea besar seperti 'apa makna kehidupan?'.", type: 'N' },
            // Thinking (T) vs Feeling (F)
            { statement: "Bila pilih ahli kumpulan, saya akan pilih kawan yang paling pandai, bukan yang paling rapat.", type: 'T' },
            { statement: "Saya akan rasa serba salah kalau keputusan saya buat kawan saya sedih.", type: 'F' },
            { statement: "Lebih baik beritahu kawan kebenaran yang pahit daripada menipu untuk jaga hati.", type: 'T' },
            { statement: "Saya mudah terasa atau simpati bila tengok cerita sedih.", type: 'F' },
            { statement: "Peraturan sekolah perlu adil untuk semua orang, tiada pengecualian.", type: 'T' },
            { statement: "Saya akan cuba elak bergaduh dengan kawan, walaupun saya betul.", type: 'F' },
            { statement: "Saya boleh kawal perasaan saya agar ia mengganggu kerja sekolah.", type: 'T' },
            { statement: "Saya akan pertahankan kawan saya tak kira apa pun.", type: 'F' },
            { statement: "Saya lebih kagum dengan orang yang bijak daripada orang yang baik hati.", type: 'T' },
            { statement: "Saya suka tolong kawan-kawan walaupun saya sibuk dengan kerja sendiri.", type: 'F' },
            // Judging (J) vs Perceiving (P)
            { statement: "Saya akan siapkan semua kerja sekolah dulu, baru saya main.", type: 'J' },
            { statement: "Saya suka bila ada banyak pilihan dan mengambil masa untuk buat keputusan.", type: 'P' },
            { statement: "Saya rasa tenang bila semua barang saya kemas dan tersusun.", type: 'J' },
            { statement: "Rancangan saat akhir selalunya lebih seronok.", type: 'P' },
            { statement: "Saya menghargai kawan yang menepati masa dan janji.", type: 'J' },
            { statement: "Saya okay je kalau rancangan hujung minggu tiba-tiba bertukar.", type: 'P' },
            { statement: "Saya suka buat senarai 'to-do-list' dan tandakan apa yang dah siap.", type: 'J' },
            { statement: "Saya selalunya buat kerja bila 'mood' saya datang.", type: 'P' },
            { statement: "Saya lebih suka perkara yang telah dirancang berbanding kejutan.", type: 'J' },
            { statement: "Saya rasa gembira bila hidup saya fleksibel dan spontan.", type: 'P' },
            // Lie Scale (L)
            { statement: "Saya sentiasa bercakap benar dalam semua keadaan.", type: 'L' },
            { statement: "Perasaan saya sentiasa gembira dan positif.", type: 'L' },
            { statement: "Saya sentiasa tumpang gembira dengan kejayaan semua orang.", type: 'L' },
            { statement: "Saya mengikut semua nasihat ibu bapa saya tanpa persoalan.", type: 'L' },
            { statement: "Fikiran saya sentiasa positif tentang semua orang.", type: 'L' },
        ];
        
        const results = {
            "ISTJ": { title: "Pembina yang Praktikal", description: "Anda seorang yang sangat bertanggungjawab dan boleh diharap. Anda suka perkara yang jelas, teratur dan mengikut fakta. Anda adalah tulang belakang dalam mana-mana kumpulan.", minat: { title: "🧭 Hala Tuju Anda", hala_tuju: "Anda seorang **Pembina Praktikal**. Anda cemerlang dalam bidang yang memerlukan ketelitian, fakta dan peraturan yang jelas. Hala tuju anda cenderung ke arah **Teknikal, Pengurusan Data, atau bidang berasaskan Sains** yang memerlukan ketepatan." }, belajar: { title: "📚 Cara Belajar Paling Sesuai", gaya_belajar: "Anda belajar paling baik melalui **Membaca/Menulis** dan **Melihat**. Anda suka membaca fakta, menulis nota yang tersusun, dan melihat contoh praktikal yang jelas.", tips: ["Buat jadual belajar yang kemas dan ikut betul-betul.", "Suka belajar di tempat yang senyap dan teratur.", "Faham sesuatu bila ada contoh yang jelas dan fakta yang betul.", "Buat nota yang ringkas dan tersusun."] }, berjaya: { title: "🏆 Tips Untuk Berjaya", tips: ["Gunakan sifat teliti awak untuk semak kerja sekolah supaya tiada kesilapan.", "Jangan takut untuk tanya cikgu jika tak faham, awak suka maklumat yang tepat.", "Siapkan kerja awal, jangan tunggu 'last minute'."] } },
            "ISFJ": { title: "Penyokong yang Setia", description: "Anda seorang yang sangat baik hati dan prihatin. Anda sentiasa ada untuk membantu kawan-kawan dan memastikan semua orang di sekeliling anda selesa dan gembira.", minat: { title: "🧭 Hala Tuju Anda", hala_tuju: "Anda seorang **Penyokong Harmoni**. Anda mempunyai kebolehan semula jadi untuk memahami dan membantu orang lain. Hala tuju anda sesuai dalam bidang **Sains Kesihatan, Pendidikan, atau Khidmat Sosial** di mana anda boleh menyumbang kepada masyarakat." }, belajar: { title: "📚 Cara Belajar Paling Sesuai", gaya_belajar: "Anda seorang pelajar **Melihat** dan **Membaca/Menulis**. Anda mudah ingat apabila melihat demonstrasi oleh guru dan membuat nota yang kemas serta cantik.", tips: ["Belajar akan lebih berkesan bila anda tahu ia dapat membantu orang lain.", "Suka belajar langkah demi langkah dengan arahan yang jelas.", "Buat nota yang kemas dan cantik untuk mudah ingat.", "Belajar dalam kumpulan kecil dengan kawan rapat."] }, berjaya: { title: "🏆 Tips Untuk Berjaya", tips: ["Gunakan sifat baik hati awak untuk bantu kawan yang lemah dalam pelajaran.", "Jangan lupa jaga diri sendiri, jangan terlalu risaukan orang lain sampai terabai kerja sekolah.", "Sertai aktiviti sukarelawan di sekolah."] } },
            "INFJ": { title: "Penasihat yang Berwawasan", description: "Anda seorang yang pendiam tetapi mempunyai pemikiran yang mendalam. Anda suka memahami orang lain pada tahap yang lebih mendalam dan ingin memberi inspirasi kepada mereka.", minat: { title: "🧭 Hala Tuju Anda", hala_tuju: "Anda seorang **Pemikir Kemanusiaan**. Anda suka meneroka idea-idea yang mendalam dan cara untuk memperbaiki dunia. Hala tuju anda cenderung ke arah bidang **Sastera, Seni, Kaunseling, atau Sains Sosial**." }, belajar: { title: "📚 Cara Belajar Paling Sesuai", gaya_belajar: "Gaya belajar utama anda ialah **Membaca/Menulis**. Anda suka membaca konsep yang mendalam dan menulis semula idea dengan perkataan sendiri untuk faham. Anda juga pelajar **Visual** yang baik apabila menggunakan peta minda.", tips: ["Anda lebih faham bila dapat kaitkan pelajaran dengan gambaran besar atau nilai murni.", "Suka belajar bersendirian di tempat yang tenang.", "Gunakan peta minda untuk hubungkan idea-idea.", "Tulis semula nota dengan ayat sendiri untuk lebih faham."] }, berjaya: { title: "🏆 Tips Untuk Berjaya", tips: ["Percaya pada idea-idea unik anda dan kongsikannya dalam kelas.", "Cari kawan yang memahami dan boleh bincang idea-idea besar bersama.", "Tulis jurnal atau blog untuk luahkan fikiran anda."] } },
            "INTJ": { title: "Pemikir yang Strategik", description: "Anda seorang yang bijak dan suka merancang. Anda sentiasa berfikir beberapa langkah ke hadapan dan suka menyelesaikan masalah yang rumit dengan cara yang efisien.", minat: { title: "🧭 Hala Tuju Anda", hala_tuju: "Anda seorang **Pemikir Strategik**. Anda suka menganalisis dan menyelesaikan masalah yang rumit. Hala tuju anda lebih cenderung ke arah bidang **Sains, Teknologi, dan Kejuruteraan**, di mana anda boleh merancang dan mencipta sesuatu yang baru." }, belajar: { title: "📚 Cara Belajar Paling Sesuai", gaya_belajar: "Anda adalah pelajar **Membaca/Menulis** yang cemerlang. Anda suka mendalami teks yang kompleks. Anda juga seorang pelajar **Visual** yang baik dalam memahami carta, graf dan model teori.", tips: ["Suka belajar sendiri untuk faham konsep yang mendalam.", "Lebih minat teori dan idea berbanding fakta hafalan.", "Cabar diri dengan soalan-soalan KBAT (Kemahiran Berfikir Aras Tinggi).", "Belajar topik yang mencabar intelek anda."] }, berjaya: { title: "🏆 Tips Untuk Berjaya", tips: ["Jangan takut untuk persoalkan sesuatu sehingga anda betul-betul faham.", "Tetapkan matlamat jangka panjang untuk diri sendiri.", "Belajar untuk bekerjasama dengan orang lain, walaupun anda suka buat kerja sendiri."] } },
            "ENFP": { title: "Pencetus Inspirasi", description: "Anda seorang yang ceria, kreatif dan penuh dengan idea! Anda suka berkawan dan memberi semangat kepada orang lain untuk mencuba perkara baru.", minat: { title: "🧭 Hala Tuju Anda", hala_tuju: "Anda seorang **Pencipta Kreatif**. Anda penuh dengan idea dan suka berhubung dengan orang lain. Hala tuju anda sesuai dalam bidang **Komunikasi, Seni Persembahan, atau Keusahawanan** di mana anda boleh menyebarkan semangat positif." }, belajar: { title: "📚 Cara Belajar Paling Sesuai", gaya_belajar: "Anda belajar melalui **Mendengar** dan **Melihat**. Perbincangan kumpulan (mendengar) dan peta minda berwarna-warni (melihat) sangat berkesan untuk anda. Anda juga suka belajar secara **Praktikal**.", tips: ["Belajar jadi seronok bila bincang dengan kawan-kawan (brainstorming).", "Guna kad imbasan berwarna-warni atau lukis nota untuk lebih ingat.", "Suka belajar topik yang menarik dan berkaitan dengan manusia.", "Perlukan kebebasan untuk belajar dengan cara sendiri."] }, berjaya: { title: "🏆 Tips Untuk Berjaya", tips: ["Sertai aktiviti kokurikulum seperti debat atau kelab drama untuk serlahkan bakat.", "Cuba fokus siapkan satu tugasan sebelum mula yang lain, jangan mudah hilang fokus!", "Gunakan semangat anda untuk beri inspirasi kepada kawan-kawan."] } },
            "ENTJ": { title: "Pemimpin yang Berwawasan", description: "Anda seorang pemimpin semula jadi yang berani dan tegas. Anda nampak gambaran besar dan pandai menyusun strategi untuk mencapai matlamat.", minat: { title: "🧭 Hala Tuju Anda", hala_tuju: "Anda seorang **Pemimpin Strategik**. Anda dilahirkan untuk memimpin dan menyusun atur. Hala tuju anda sesuai dalam bidang **Perniagaan, Undang-undang, atau Pengurusan** di mana anda boleh membuat keputusan besar dan memimpin pasukan." }, belajar: { title: "📚 Cara Belajar Paling Sesuai", gaya_belajar: "Gaya belajar anda seimbang antara **Mendengar** (melalui perdebatan dan perbincangan) dan **Membaca/Menulis** (untuk menyusun strategi dan fakta).", tips: ["Suka belajar sesuatu yang logik dan boleh digunakan untuk capai matlamat.", "Belajar dengan berdebat atau berbincang dengan orang lain.", "Fokus pada matlamat utama dan cari cara paling efisien untuk belajar.", "Suka memimpin kumpulan belajar."] }, berjaya: { title: "🏆 Tips Untuk Berjaya", tips: ["Jadi ketua kelas atau pemimpin dalam persatuan.", "Belajar untuk mendengar pandangan orang lain, bukan semua idea awak yang terbaik.", "Jangan takut gagal, anggap ia sebagai satu pelajaran."] } },
            "ISFP": { title: "Artis yang Spontan", description: "Anda seorang yang santai, mesra dan mempunyai jiwa seni. Anda suka menikmati keindahan sekeliling dan meluahkan perasaan melalui cara yang kreatif.", minat: { title: "🧭 Hala Tuju Anda", hala_tuju: "Anda seorang **Pencipta Kreatif**. Anda melihat dunia melalui lensa seni dan keindahan. Hala tuju anda sesuai dalam bidang **Seni Visual, Muzik, Reka Bentuk, atau bidang 'hands-on'** yang membolehkan anda berkarya." }, belajar: { title: "📚 Cara Belajar Paling Sesuai", gaya_belajar: "Anda adalah pelajar **Praktikal (Kinestetik)** sejati. Anda belajar dengan terbaik apabila dapat 'buat' sesuatu dengan tangan. Anda juga pelajar **Visual** yang menghargai keindahan dalam bahan pembelajaran.", tips: ["Belajar dengan cara 'hands-on' atau praktikal, bukan sekadar teori.", "Lebih suka persekitaran belajar yang santai dan tidak tertekan.", "Gunakan kreativiti untuk buat nota yang menarik.", "Belajar mengikut rentak sendiri."] }, berjaya: { title: "🏆 Tips Untuk Berjaya", tips: ["Sertai kelab seni atau muzik di sekolah.", "Jangan takut untuk tunjukkan hasil kerja kreatif anda.", "Cari cara untuk jadikan rutin harian lebih menarik dan seronok."] } },
            "INFP": { title: "Idealistik yang Kreatif", description: "Anda seorang yang baik hati, penuh imaginasi dan berpegang teguh pada nilai murni. Anda sentiasa mencari kebaikan dalam diri setiap orang.", minat: { title: "🧭 Hala Tuju Anda", hala_tuju: "Anda seorang **Pemikir Kemanusiaan**. Anda sangat kreatif dan dipandu oleh nilai-nilai murni. Hala tuju anda sesuai dalam bidang **Penulisan, Seni, atau kerja-kerja sosial** yang membolehkan anda memperjuangkan apa yang anda percaya." }, belajar: { title: "📚 Cara Belajar Paling Sesuai", gaya_belajar: "Gaya belajar utama anda ialah **Membaca/Menulis**. Anda suka membaca dan menulis untuk meneroka idea dan perasaan. Anda juga pelajar **Visual** yang baik apabila dapat membayangkan konsep yang dipelajari.", tips: ["Belajar akan lebih bermakna jika ia selari dengan nilai peribadi anda.", "Suka belajar bersendirian untuk berimaginasi dan berfikir.", "Tulis esei atau cerita untuk luahkan pemahaman anda.", "Kaitkan pelajaran dengan isu-isu dunia sebenar."] }, berjaya: { title: "🏆 Tips Untuk Berjaya", tips: ["Teruskan berpegang pada prinsip anda.", "Cari kawan yang menghargai keunikan anda.", "Gunakan kreativiti anda untuk menyelesaikan masalah dengan cara yang berbeza."] } },
            "ISTP": { title: "Penyelesai Masalah yang Cekap", description: "Anda seorang yang berani dan praktikal. Anda suka faham bagaimana sesuatu berfungsi dan sangat pandai menggunakan alatan untuk menyelesaikan masalah.", minat: { title: "🧭 Hala Tuju Anda", hala_tuju: "Anda seorang **Pembina Praktikal**. Anda suka 'hands-on' dan menyelesaikan masalah di dunia nyata. Hala tuju anda sesuai dalam bidang **Kejuruteraan, Kemahiran Teknikal, atau Sukan Lasak** di mana anda boleh bertindak dengan pantas." }, belajar: { title: "📚 Cara Belajar Paling Sesuai", gaya_belajar: "Anda adalah pelajar **Praktikal (Kinestetik)** yang paling unggul. Anda perlu mencuba, membuka, dan memasang semula sesuatu untuk faham. Anda juga belajar melalui **Melihat** bagaimana sesuatu itu berfungsi.", tips: ["Belajar dengan membuat atau mencuba sendiri, bukan hanya membaca.", "Suka menyelesaikan masalah praktikal dan logik.", "Tidak suka peraturan yang terlalu ketat.", "Faham sesuatu dengan cepat bila dapat lihat ia berfungsi."] }, berjaya: { title: "🏆 Tips Untuk Berjaya", tips: ["Sertai kelab robotik atau aktiviti lasak.", "Belajar dari kesilapan dan cuba lagi.", "Fokus pada subjek yang membolehkan anda membuat sesuatu dengan tangan."] } },
            "INTP": { title: "Pemikir yang Inovatif", description: "Anda seorang yang sangat ingin tahu dan sentiasa ada idea-idea baru yang unik. Anda suka menganalisis corak dan menyelesaikan masalah yang mencabar.", minat: { title: "🧭 Hala Tuju Anda", hala_tuju: "Anda seorang **Pemikir Strategik**. Anda suka meneroka idea dan teori yang kompleks. Hala tuju anda sesuai dalam bidang **Sains, Penyelidikan, atau Teknologi Maklumat** di mana anda boleh memuaskan rasa ingin tahu anda yang mendalam." }, belajar: { title: "📚 Cara Belajar Paling Sesuai", gaya_belajar: "Anda adalah pelajar **Membaca/Menulis** yang kuat, terutamanya apabila membaca tentang teori yang kompleks. Anda juga seorang pelajar **Visual** yang suka melihat model dan rajah untuk memahami sistem.", tips: ["Suka belajar konsep yang kompleks dan abstrak.", "Perlukan ruang untuk berfikir sendiri tanpa gangguan.", "Belajar dengan mempersoalkan 'kenapa' dan 'bagaimana'.", "Tidak suka menghafal fakta tanpa memahaminya."] }, berjaya: { title: "🏆 Tips Untuk Berjaya", tips: ["Jangan takut untuk berkongsi idea gila anda, mungkin ia bernas!", "Cari guru atau mentor yang boleh mencabar pemikiran anda.", "Belajar untuk siapkan tugasan, bukan hanya berfikir tentangnya."] } },
            "ESTP": { title: "Penggerak yang Cergas", description: "Anda seorang yang bertenaga dan suka hidup dalam keseronokan. Anda bijak mengambil peluang dan tidak takut untuk mencuba perkara baru.", minat: { title: "🧭 Hala Tuju Anda", hala_tuju: "Anda seorang **Penggerak Aksi**. Anda suka perkara yang berlaku dengan pantas dan di dunia nyata. Hala tuju anda sesuai dalam bidang **Sukan, Keusahawanan, atau Perkhidmatan Kecemasan** di mana anda boleh bertindak segera." }, belajar: { title: "📚 Cara Belajar Paling Sesuai", gaya_belajar: "Anda belajar dengan terbaik melalui **Praktikal (Kinestetik)**. Anda perlu bergerak dan melakukan sesuatu. Anda juga belajar melalui **Mendengar** perbualan yang rancak dan pantas.", tips: ["Belajar dengan melakukan aktiviti atau permainan.", "Suka persekitaran belajar yang aktif dan tidak membosankan.", "Fokus pada masa sekarang, bukan perancangan jangka panjang.", "Belajar melalui pengalaman sebenar."] }, berjaya: { title: "🏆 Tips Untuk Berjaya", tips: ["Sertai pasukan sukan sekolah.", "Belajar untuk berfikir sebelum bertindak.", "Gunakan tenaga anda untuk perkara yang berfaedah."] } },
            "ESFP": { title: "Penghibur yang Ceria", description: "Anda seorang yang sangat ceria dan spontan. Anda suka menghiburkan orang lain dan menjadikan suasana sekeliling anda meriah dan seronok.", minat: { title: "🧭 Hala Tuju Anda", hala_tuju: "Anda seorang **Pencipta Kreatif**. Anda suka menjadi tumpuan dan menceriakan orang lain. Hala tuju anda sesuai dalam bidang **Seni Persembahan, Hospitaliti, atau Jualan** di mana anda boleh berinteraksi dengan ramai orang." }, belajar: { title: "📚 Cara Belajar Paling Sesuai", gaya_belajar: "Anda adalah pelajar **Mendengar** dan **Praktikal**. Anda suka belajar dalam kumpulan yang seronok (mendengar) dan melalui aktiviti atau lakonan (praktikal).", tips: ["Belajar dalam kumpulan yang seronok dan interaktif.", "Suka aktiviti praktikal dan persembahan.", "Gunakan humor dan kreativiti untuk mengingat fakta.", "Perlukan pujian dan galakan untuk terus bersemangat."] }, berjaya: { title: "🏆 Tips Untuk Berjaya", tips: ["Sertai persembahan atau pertandingan di sekolah.", "Belajar untuk fokus walaupun ada banyak gangguan.", "Gunakan keceriaan anda untuk menceriakan hari kawan-kawan."] } },
            "ENTP": { title: "Pencabar Idea yang Pintar", description: "Anda seorang yang bijak, cepat berfikir dan suka berdebat tentang idea-idea besar. Anda tidak takut untuk mencabar pemikiran biasa.", minat: { title: "🧭 Hala Tuju Anda", hala_tuju: "Anda seorang **Pemikir Strategik**. Anda suka mencabar idea sedia ada dan mencari cara yang lebih baik. Hala tuju anda sesuai dalam bidang **Undang-undang, Keusahawanan, atau Sains** di mana anda boleh berdebat dan berinovasi." }, belajar: { title: "📚 Cara Belajar Paling Sesuai", gaya_belajar: "Gaya belajar utama anda ialah **Mendengar**. Anda belajar dengan terbaik melalui perdebatan dan perbincangan idea. Anda juga pelajar **Visual** yang suka melihat bagaimana konsep-konsep berhubung kait.", tips: ["Belajar dengan berdebat atau membahaskan sesuatu topik.", "Suka meneroka pelbagai idea sebelum membuat kesimpulan.", "Cepat bosan dengan rutin, perlukan cabaran baru.", "Belajar dengan mencari kelemahan dalam sesuatu hujah."] }, berjaya: { title: "🏆 Tips Untuk Berjaya", tips: ["Sertai pasukan bahas atau debat sekolah.", "Belajar untuk menghormati pandangan orang lain, walaupun anda tidak setuju.", "Pastikan anda siapkan kerja, bukan hanya pandai berdebat."] } },
            "ESTJ": { title: "Pengurus yang Tegas", description: "Anda seorang pemimpin semula jadi yang pandai menguruskan sesuatu. Anda praktikal, tegas dan sentiasa pastikan semua perkara berjalan lancar.", minat: { title: "🧭 Hala Tuju Anda", hala_tuju: "Anda seorang **Pemimpin Strategik**. Anda cekap dalam mengurus dan menyusun. Hala tuju anda sesuai dalam bidang **Pengurusan, Perniagaan, atau Pentadbiran** di mana anda boleh memastikan semuanya berjalan dengan lancar." }, belajar: { title: "📚 Cara Belajar Paling Sesuai", gaya_belajar: "Anda adalah pelajar **Membaca/Menulis** yang sistematik. Anda suka fakta yang tersusun. Anda juga belajar melalui **Mendengar** arahan yang jelas dan logik daripada guru.", tips: ["Suka persekitaran belajar yang berstruktur dan teratur.", "Belajar mengikut fakta dan prosedur yang betul.", "Suka apabila ada matlamat yang jelas.", "Buat senarai semak (checklist) untuk setiap tugasan."] }, berjaya: { title: "🏆 Tips Untuk Berjaya", tips: ["Ambil jawatan sebagai pengawas atau ketua dalam kelab.", "Belajar untuk lebih fleksibel dan terbuka kepada cara baru.", "Gunakan kemahiran organisasi anda untuk membantu kumpulan belajar."] } },
            "ESFJ": { title: "Konsul yang Prihatin", description: "Anda seorang yang sangat popular dan suka bergaul. Anda sentiasa mengambil berat tentang orang lain dan suka menolong untuk memastikan semua orang gembira.", minat: { title: "🧭 Hala Tuju Anda", hala_tuju: "Anda seorang **Penyokong Harmoni**. Anda suka menjaga dan menyatukan orang ramai. Hala tuju anda sesuai dalam bidang **Pendidikan, Kesihatan, atau Pengurusan Acara** di mana anda boleh bekerjasama dengan orang lain." }, belajar: { title: "📚 Cara Belajar Paling Sesuai", gaya_belajar: "Gaya belajar utama anda ialah **Mendengar**. Anda belajar dengan baik apabila berbincang dalam kumpulan. Anda juga pelajar **Visual** yang suka melihat bahan pembelajaran yang kemas dan teratur.", tips: ["Belajar dengan berbincang dan bekerjasama dalam kumpulan.", "Sangat termotivasi apabila dapat membantu rakan sekelas.", "Suka guru yang peramah dan persekitaran kelas yang harmoni.", "Buat nota yang teratur dan mudah difahami."] }, berjaya: { title: "🏆 Tips Untuk Berjaya", tips: ["Jadi sukarelawan untuk acara-acara sekolah.", "Jangan terlalu risau apa orang kata tentang anda.", "Gunakan kemahiran sosial anda untuk mewujudkan suasana kelas yang positif."] } },
            "ENFJ": { title: "Mentor yang Menginspirasi", description: "Anda seorang pemimpin yang berkarisma dan penuh inspirasi. Anda pandai memahami perasaan orang lain dan suka memotivasi mereka untuk mencapai impian.", minat: { title: "🧭 Hala Tuju Anda", hala_tuju: "Anda seorang **Pemimpin Berinspirasi**. Anda suka memimpin dan memberi semangat kepada orang lain. Hala tuju anda sesuai dalam bidang **Pendidikan, Komunikasi, atau Kerja Sosial** di mana anda boleh menjadi mentor kepada orang lain." }, belajar: { title: "📚 Cara Belajar Paling Sesuai", gaya_belajar: "Anda adalah pelajar **Mendengar** yang hebat. Anda belajar melalui interaksi, perbincangan dan mendengar cerita yang memberi inspirasi. Anda juga pelajar **Visual** yang suka melihat bagaimana idea memberi kesan kepada orang lain.", tips: ["Belajar dalam suasana yang harmoni dan bekerjasama.", "Suka memimpin perbincangan dalam kumpulan.", "Lebih bersemangat bila belajar sesuatu yang boleh memberi impak positif kepada masyarakat.", "Faham perasaan dan pandangan orang lain."] }, berjaya: { title: "🏆 Tips Untuk Berjaya", tips: ["Jadi mentor atau pembimbing kepada pelajar yang lebih muda.", "Gunakan kebolehan berucap anda dalam perhimpunan atau pertandingan.", "Belajar untuk menerima kritikan untuk penambahbaikan."] } }
        };

        // --- Functions ---

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function startQuiz() {
            studentName = nameInput.value.trim();
            if (studentName === "") { nameError.classList.remove('hidden'); return; }
            nameError.classList.add('hidden');
            registrationContainer.classList.add('hidden');
            quizContainer.classList.remove('hidden');
            quizContainer.classList.add('fade-in');
            buttonContainer.classList.remove('hidden');
            buttonContainer.classList.add('fade-in');
            header.classList.add('hidden');
            shuffledQuestions = [...allQuestions];
            shuffleArray(shuffledQuestions);
            displayQuestions();
        }

        function displayQuestions() {
            questionsWrapper.innerHTML = '';
            const options = [ { label: 'Sangat Setuju', value: 5 }, { label: 'Setuju', value: 4 }, { label: 'Neutral', value: 3 }, { label: 'Tidak Setuju', value: 2 }, { label: 'Sangat Tidak Setuju', value: 1 } ];
            shuffledQuestions.forEach((q, index) => {
                const qBlock = document.createElement('div');
                qBlock.className = 'border-t border-gray-200 pt-6 first:border-t-0 first:pt-0';
                qBlock.innerHTML = `
                    <p class="font-semibold text-lg mb-4 text-center">${index + 1}. ${q.statement}</p>
                    <div class="likert-options">
                        ${options.map(opt => `
                            <label>
                                <input type="radio" name="question${index}" value="${opt.value}" class="sr-only">
                                <span class="block w-full h-full p-2">${opt.label}</span>
                            </label>
                        `).join('')}
                    </div>
                `;
                questionsWrapper.appendChild(qBlock);
            });
            document.querySelectorAll('input[type="radio"]').forEach(radio => {
                radio.addEventListener('change', updateProgress);
            });
        }
        
        function updateProgress() {
            const totalQuestions = shuffledQuestions.length;
            const answeredQuestions = document.querySelectorAll('input[type="radio"]:checked').length;
            const percentage = (answeredQuestions / totalQuestions) * 100;
            progressBar.style.width = `${percentage}%`;
            progressText.textContent = `${answeredQuestions} / ${totalQuestions}`;
        }

        function calculateResult() {
            const totalQuestions = shuffledQuestions.length;
            if (document.querySelectorAll('input[type="radio"]:checked').length < totalQuestions) {
                errorMsg.classList.remove('hidden');
                return;
            }
            errorMsg.classList.add('hidden');

            const scores = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
            let dishonestyScore = 0;

            shuffledQuestions.forEach((q, index) => {
                const selectedValue = parseInt(document.querySelector(`input[name="question${index}"]:checked`).value);
                if (q.type === 'L') {
                    if (selectedValue >= 4) { // Setuju atau Sangat Setuju dengan penyataan 'Lie Scale'
                        dishonestyScore++;
                    }
                } else {
                    const score = selectedValue - 3; // Skala 1-5 diubah ke -2 hingga +2
                    scores[q.type] += score;
                }
            });

            let personality = "";
            personality += scores.E >= scores.I ? 'E' : 'I';
            personality += scores.S >= scores.N ? 'S' : 'N';
            personality += scores.T >= scores.F ? 'T' : 'F';
            personality += scores.J >= scores.P ? 'P' : 'J';

            displayResult(personality, dishonestyScore);
        }

        function displayAbbreviationExplanation(personality) {
            const explanations = {
                'I': '<strong>I - Introvert:</strong> Anda mendapat tenaga daripada masa bersendirian.',
                'E': '<strong>E - Extrovert:</strong> Anda mendapat tenaga daripada interaksi sosial.',
                'S': '<strong>S - Sensing:</strong> Anda fokus pada fakta dan butiran yang nyata.',
                'N': '<strong>N - Intuition:</strong> Anda fokus pada idea dan gambaran besar.',
                'T': '<strong>T - Thinking:</strong> Anda membuat keputusan berdasarkan logik dan analisis.',
                'F': '<strong>F - Feeling:</strong> Anda membuat keputusan berdasarkan nilai dan perasaan.',
                'J': '<strong>J - Judging:</strong> Anda suka kehidupan yang teratur dan terancang.',
                'P': '<strong>P - Perceiving:</strong> Anda suka kehidupan yang fleksibel dan spontan.'
            };
            let html = '<h4 class="text-lg font-bold text-gray-800 mb-2">Maksud Personaliti Anda:</h4><div class="space-y-1 text-sm">';
            personality.split('').forEach(letter => {
                html += `<p>${explanations[letter]}</p>`;
            });
            html += '</div>';
            abbreviationExplanation.innerHTML = html;
        }

        function displayResult(personality, dishonestyScore) {
            const resultData = results[personality];
            if (resultData) {
                // Honesty Feedback Logic
                let honestyHTML = '';
                if (dishonestyScore >= 3) {
                    honestyHTML = `<div class="flex-shrink-0"><svg class="h-8 w-8 text-red-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg></div><div><h4 class="font-bold text-red-800">Tahap Kejujuran: Mungkin Tidak Tepat</h4><p class="text-sm text-red-700">Kami mengesan beberapa jawapan yang sangat luar biasa. Ini mungkin bermakna anda tidak menjawab dengan jujur. Keputusan personaliti ini mungkin tidak menggambarkan diri anda yang sebenar.</p></div>`;
                    honestyFeedback.className = 'mb-8 p-4 rounded-lg flex items-start space-x-4 bg-red-100 border border-red-200';
                } else if (dishonestyScore >= 1) {
                    honestyHTML = `<div class="flex-shrink-0"><svg class="h-8 w-8 text-yellow-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg></div><div><h4 class="font-bold text-yellow-800">Tahap Kejujuran: Cenderung Ideal</h4><p class="text-sm text-yellow-700">Jawapan anda menunjukkan anda mungkin cuba menonjolkan sisi terbaik diri anda. Ini adalah perkara biasa, tetapi ingatlah bahawa keputusan ini mungkin sedikit berbeza daripada personaliti sebenar anda.</p></div>`;
                    honestyFeedback.className = 'mb-8 p-4 rounded-lg flex items-start space-x-4 bg-yellow-100 border border-yellow-200';
                } else {
                    honestyHTML = `<div class="flex-shrink-0"><svg class="h-8 w-8 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg></div><div><h4 class="font-bold text-green-800">Tahap Kejujuran: Sangat Baik</h4><p class="text-sm text-green-700">Tahniah! Jawapan anda kelihatan konsisten dan jujur. Ini menjadikan keputusan ujian ini sangat boleh dipercayai sebagai panduan untuk diri anda.</p></div>`;
                    honestyFeedback.className = 'mb-8 p-4 rounded-lg flex items-start space-x-4 bg-green-100 border border-green-200';
                }
                honestyFeedback.innerHTML = honestyHTML;

                resultForName.textContent = `Keputusan Ujian untuk, ${studentName}!`;
                resultTitle.textContent = resultData.title;
                resultAbbreviation.textContent = `(${personality})`;
                resultDescription.textContent = resultData.description;
                
                displayAbbreviationExplanation(personality);

                document.getElementById('minat').innerHTML = `<h4 class="text-xl font-bold text-blue-700">${resultData.minat.title}</h4><p>${resultData.minat.hala_tuju}</p>`;
                document.getElementById('belajar').innerHTML = `<h4 class="text-xl font-bold text-blue-700">${resultData.belajar.title}</h4><div class="p-4 bg-blue-50 rounded-lg mb-4"><p class="font-semibold">Rumusan Gaya Belajar:</p><p class="text-sm">${resultData.belajar.gaya_belajar}</p></div><ul class="list-disc list-inside space-y-2">${resultData.belajar.tips.map(tip => `<li>${tip}</li>`).join('')}</ul>`;
                document.getElementById('berjaya').innerHTML = `<h4 class="text-xl font-bold text-blue-700">${resultData.berjaya.title}</h4><ul class="list-disc list-inside space-y-2">${resultData.berjaya.tips.map(tip => `<li>${tip}</li>`).join('')}</ul>`;
                
                quizContainer.classList.add('hidden');
                buttonContainer.classList.add('hidden');
                resultContainer.classList.remove('hidden');
                resultContainer.classList.add('fade-in');
                openTab('minat');
                window.scrollTo(0, 0);
            }
        }
        
        function openTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.add('hidden'));
            document.getElementById(tabName).classList.remove('hidden');
            document.querySelectorAll('.tab-button').forEach(button => button.classList.remove('active'));
            tabsContainer.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
        }

        function resetQuiz() {
            resultContainer.classList.add('hidden');
            registrationContainer.classList.remove('hidden');
            registrationContainer.classList.add('fade-in');
            header.classList.remove('hidden');
            nameInput.value = "";
            studentName = "";
            progressBar.style.width = '0%';
            progressText.textContent = `0 / ${allQuestions.length}`;
            window.scrollTo(0, 0);
        }

        // --- Event Listeners ---
        startBtn.addEventListener('click', startQuiz);
        submitBtn.addEventListener('click', calculateResult);
        retryBtn.addEventListener('click', resetQuiz);
        tabsContainer.addEventListener('click', (e) => {
            if (e.target.matches('.tab-button')) {
                openTab(e.target.dataset.tab);
            }
        });
    });
    </script>
</body>
</html>
